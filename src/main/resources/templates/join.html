<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>NTCA</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">

    <!-- animate css -->
    <link rel="stylesheet" href="css/animate.min.css">
    <!-- bootstrap css -->
    <!--    <link rel="stylesheet" href="css/bootstrap2.min.css">-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- font-awesome -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- google font -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700,800' rel='stylesheet'
          type='text/css'>

    <!-- custom css -->
    <link rel="stylesheet" href="css/templatemo-style.css">
    <link rel="shortcut icon" sizes="16x16" th:href="@{picture/favicon.ico}">


    <!--스크립트-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
    </script>
    <script>

        $(document).ready(function () {

            let regExp = /^[a-z0-9_-]{5,15}$/;
            let phoneNumberRegExp = /^([01]{2})([0|1|6|7|8|9]{1})([0-9]{3,4})([0-9]{4})$/;

            let memberIdResult = false;
            let passwordResult = false;
            let passwordResult2 = false;
            let emailResult = false;
            let emailResult2 = false;
            let phoneNumberResult = false;

            $("#memberId").blur(function () {
                $('#idError').css('color', '#ea3838');
                if ($("#memberId").val() === null || $("#memberId").val() === "") {
                    $("#idError").text("필수 정보입니다.");
                    memberIdResult = false;
                } else if (!regExp.test($("#memberId").val())) {
                    $("#idError").text("5~15자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.");
                    memberIdResult = false;
                } else {
                    $.ajax({
                        url: '/idCheck',
                        type: 'post',
                        data: { memberId : $('#memberId').val()},
                        dataType: 'json',
                        success: function (check) {
                            if (check === true) {
                                $("#idError").text('중복 아이디 입니다.');
                                return memberIdResult = false;
                            } else {
                                $('#idError').text('아이디 입력 성공!');
                                $('#idError').css('color', '#304b98');
                                return memberIdResult = true;
                            }
                        },
                        error: function () {
                            alert("통신 오류");
                            window.location="/join"
                        }
                    })
                }
            });

            $("#password").blur(function () {
                $('#pwError').css('color', '#ea3838');
                if ($("#password").val() === null || $("#password").val() === "") {
                    $("#pwError").text("필수 정보입니다.");
                    passwordResult = false;
                } else if (!regExp.test($("#password").val())) {
                    $('#pwError').text('5~15자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.');
                    passwordResult = false;
                } else {
                    $("#pwError").text('비밀번호 입력 성공!');
                    $('#pwError').css('color', '#304b98');
                    passwordResult = true;
                }
            });

            $("#password2").blur(function () {
                $('#pwError2').css('color', '#ea3838');
                if ($("#password2").val() === null || $("#password2").val() === "") {
                    $("#pwError2").text("필수 정보입니다.");
                    passwordResult2 = false;
                } else if (!($("#password").val() === $("#password2").val())){
                    $('#pwError2').text('비밀번호가 일치하지 않습니다.');
                    passwordResult2 = false;
                } else {
                    $("#pwError2").text('비밀번호 일치 성공!');
                    $('#pwError2').css('color', '#304b98');
                    passwordResult2 = true;
                }
            });

            $("#email").blur(function () {
                $('#emailError').css('color', '#ea3838');
                if ($("#email").val() === null || $("#email").val() === "") {
                    $("#emailError").text("필수 정보입니다.");
                    emailResult = false;
                } else if (!regExp.test($("#email").val())){
                    $('#emailError').text('5~15자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.');
                    emailResult = false;
                } else if ($("#email2").val() === null || $("#email2").val() === ""){
                    $('#emailError').text('이메일 주소 선택은 필수입니다.');
                    emailResult = true;
                    emailResult2 = false;
                } else{
                    $("#emailError").text('이메일 입력 성공');
                    $('#emailError').css('color', '#304b98');
                    emailResult = true;
                    emailResult2 = true;
                }
            });

            $("#email2").blur(function () {
                $('#emailError').css('color', '#ea3838');
                if ($("#email2").val() === null || $("#email2").val() === "") {
                    $('#emailError').text('필수 정보입니다.');
                    emailResult2 = false;
                } else if ($("#email").val() === null || $("#email").val() === "") {
                    $('#emailError').text('이메일 아이디를 입력해주세요.');
                    emailResult = false;
                    emailResult2 = true;
                }else{
                    $("#emailError").text('이메일 입력 성공');
                    $('#emailError').css('color', '#304b98');
                    emailResult = true;
                    emailResult2 = true;
                }
            });

            $("#phoneNumber").blur(function () {
                $('#phoneNumberError').css('color', '#ea3838');
                if ($("#phoneNumber").val() === null || $("#phoneNumber").val() === "") {
                    $("#phoneNumberError").text("필수 정보입니다.");
                    phoneNumberResult = false;
                } else if (!phoneNumberRegExp.test($("#phoneNumber").val())) {
                    $('#phoneNumberError').text('형식에 맞지 않는 번호입니다. (-)제외하여 숫자만 정확히 입력해주세요.');
                    phoneNumberResult = false;
                } else {
                    $("#phoneNumberError").text('휴대전화 입력 성공!');
                    $('#phoneNumberError').css('color', '#304b98');
                    phoneNumberResult = true;
                }
            });


            $("#joinBtn").click(function () {
                if ($("#memberId").val() === null || $("#memberId").val() === "") {
                    $("#idError").text("필수 정보입니다.");
                }
                if ($("#password").val() === null || $("#password").val() === "") {
                    $("#pwError").text("필수 정보입니다.");
                }
                if ($("#password2").val() === null || $("#password2").val() === "") {
                    $("#pwError2").text("필수 정보입니다.");
                }
                if ($("#email2").val() === null || $("#email2").val() === "") {
                    $("#emailError").text("이메일 주소는 필수 정보입니다.");
                }
                if ($("#email").val() === null || $("#email").val() === "") {
                    $("#emailError").text("필수 정보입니다.");
                }
                if ($("#phoneNumber").val() === null || $("#phoneNumber").val() === "") {
                    $("#phoneNumberError").text("필수 정보입니다.");
                }

                if(memberIdResult && passwordResult && passwordResult2 && emailResult && emailResult2 && phoneNumberResult) {
                    alert("회원가입을 축하합니다.");
                    $("#joinBtn").attr('type',"submit");
                }
            });

            $("#cancelBtn").click(function () {
                window.location = "/"
            })
        });
    </script>
<!--    <script>-->

<!--        $(document).ready(function () {-->


<!--            // $("#password").blur(function () {-->
<!--            //     if (password2.test($("#password").val())) {-->
<!--            //-->
<!--            //         $("#passwordError2").text('비밀번호 입력 성공!');-->
<!--            //         $('#passwordError2').css('color', 'blue');-->
<!--            //-->
<!--            //         return passwordDB = true;-->
<!--            //-->
<!--            //     } else {-->
<!--            //         $('#passwordError2').text('비밀번호를 확인해주세요');-->
<!--            //         $('#passwordError2').css('color', 'red');-->
<!--            //-->
<!--            //         return passwordDB = false;-->
<!--            //     }-->
<!--            // });-->


<!--            $("#email").blur(function () {-->
<!--                if (email2.test($("#email").val())) {-->

<!--                    $('#emailError').text('이메일 입력 성공!');-->
<!--                    $('#emailError').css('color', 'blue');-->

<!--                    return emailDB = true;-->

<!--                } else {-->
<!--                    $('#emailError').text('이메일을 확인해주세요');-->
<!--                    $('#emailError').css('color', 'red');-->

<!--                    return emailDB = false;-->
<!--                }-->
<!--            });-->

<!--            $("#phone_number").blur(function () {-->
<!--                if (phone_number2.test($("#phone_number").val())) {-->

<!--                    $('#phone_numberError').text('핸드폰번호 입력 성공!');-->
<!--                    $('#phone_numberError').css('color', 'blue');-->
<!--                    return phone_numberDB = true;-->

<!--                } else {-->
<!--                    $('#phone_numberError').text('핸드폰번호를 확인해주세요');-->
<!--                    $('#phone_numberError').css('color', 'red');-->
<!--                    return phone_numberDB = false;-->
<!--                }-->
<!--            });-->

<!--            $("#test").click(function () {-->
<!--                var id = document.querySelector('#name');-->
<!--                var password = document.querySelector('#password');-->
<!--                var email = document.querySelector('#email');-->
<!--                var phone_number = document.querySelector('#phone_number');-->
<!--                var test = document.getElementById("test");-->


<!--                if (id.value == "" || password.value == "" || email.value == "" || phone_number.value == "") {-->
<!--                    alert("빈칸을 채워주세요.")-->
<!--                } else if (idDB === true && passwordDB === true && c() === true && emailDB === true && phone_numberDB === true) {-->

<!--                    alert("회원가입을 축하합니다.")-->

<!--                    test.type = "submit";-->
<!--                } else {-->
<!--                    alert("내용을 정확히 입력해주세요.")-->
<!--                }-->
<!--            });-->
<!--        });-->

<!--        function c() {-->
<!--            if (document.getElementById('passwordCheck').value != '') {-->
<!--                if (document.getElementById('password').value == document.getElementById('passwordCheck').value) {-->
<!--                    document.getElementById('cc').innerHTML = '비밀번호가 일치합니다.'-->
<!--                    document.getElementById('cc').style.color = 'blue';-->
<!--                    return true;-->
<!--                } else {-->
<!--                    document.getElementById('cc').innerHTML = '비밀번호가 일치하지 않습니다.';-->
<!--                    document.getElementById('cc').style.color = 'red';-->
<!--                    return false;-->
<!--                }-->
<!--            }-->
<!--        }-->

<!--    </script>-->
</head>

<body>

<!-- start contact -->
<section id="contact">
    <div class="overlay">
        <div class="container">
            <div class="row dis-flex">
                <div class="col-md-6 mx-auto text-center">
                    <a href="/"><img class="mb-0 w-25" src="picture/titleLogo.png"></a>
                    <h2 class="text-uppercase mb-0 display-3">Join</h2>
                    <div class="contact-form">
                        <form action="/join" method="post">
                            <div class="col-md-12">
                                <input type="text" id="memberId" name="memberId" class="form-control mb-2 mt-4"
                                       placeholder="아이디" maxlength="15">
                                <p id="idError" class="error text-left mb-0 ps-3"></p>
                            </div>
                            <div class="col-md-12">
                                <input type="password" id="password" name="password" class="form-control mb-2 mt-4"
                                       placeholder="비밀번호" maxlength="15">
                                <p id="pwError" class="error text-left mb-0 ps-3"></p>
                            </div>
                            <div class="col-md-12">
                                <input type="password" id="password2" name="password2" class="form-control mb-2 mt-4"
                                       placeholder="비밀번호 확인" maxlength="15">
                                <p id="pwError2" class="error text-left mb-0 ps-3"></p>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-6 ps-0 pe-2">
                                    <input type="text" id="email" name="email" class="form-control mb-2 mt-4"
                                           placeholder="이메일" maxlength="15">
                                </div>
                                <div class="col-md-6 ps-2 pe-0">
                                    <select id="email2" name="email" class="select form-control mb-2 mt-4">
                                        <option value="" selected disabled>@ 주소 선택</option>
                                        <option value="hanmail.net">@ hanmail.net</option>
                                        <option value="naver.com">@ naver.com</option>
                                        <option value="google.com">@ google.com</option>
                                        <option value="nate.com">@ nate.com</option>
                                    </select>
                                </div>
                                <p id="emailError" class="error text-left mb-0 ps-3"></p>
                            </div>
                            <div class="col-md-6">

                            </div>
                            <div class="col-md-12">
                                <input type="text" id="phoneNumber" name="phoneNumber" class="form-control mb-2 mt-4"
                                       placeholder="휴대전화" maxlength="11">
                                <p id="phoneNumberError" class="error text-left mb-0 ps-3"></p>
                            </div>
                            <div class="col-md-6 pe-2 mt-4">
                                <input type="button" id="cancelBtn" class="form-control text-uppercase" value="cancel">
                            </div>
                            <div class="col-md-6 ps-2 mt-4">
                                <input type="button" id="joinBtn" class="form-control text-uppercase" value="join">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- end contact -->

<!-- start footer -->
<footer>
    <div class="container">
        <img class="mb-2" style="max-width:5%;" src="picture/titleLogo.png">
        <div class="row">
            <p>(주)엔시티에이프로젝트</p>
            <p class="mb-0">고객센터 : 0000-0000 ( AM 09:00 ~ PM 19:00 ) | FAX : 000-000-0000 | Email :
                help@ncta_project.com</p>
            <p class="mb-0">주소 : 서울특별시 강남구 테헤란로7길 7 (역삼동) | 우편번호 : 06134</p>
            <p class="mb-0">대표 : 테스트 | 사업자등록번호 : 000-00-00000</p>
            <p class="mb-0">통신판매업 신고번호 제 0000-서울강남-0000 호</p>
            <p>Copyright © NCTA_Project</p>
        </div>
    </div>
</footer>
<!-- end footer -->

<script src="js/jquery.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/custom.js"></script>

</body>
</html>
